Perfetto Jonathan, aggiorno il prompt in modo preciso e definitivo integrando il fatto che dal pannello organizzatore si devono poter richiedere anche: nome, cognome e numero di telefono durante la fase di richiesta del badge.

Ecco la versione aggiornata e completa pronta da fornire allo sviluppatore o allâ€™AI tecnica ğŸ‘‡

â¸»

âœ… PROMPT DEFINITIVO â€“ â€œBadge Scuola con QR Code + Verifica Email + Dati Utente (Nome, Cognome, Telefono)â€

Sei uno sviluppatore senior full-stack.
Devi sviluppare una funzione che permette agli organizzatori di creare una landing per la propria scuola, dalla quale gli utenti possono richiedere un badge digitale con QR code, verificato tramite email del dominio scolastico.
Lâ€™utente non crea un profilo; fornisce solo i dati richiesti e riceve un badge digitale.

â¸»

ğŸ¯ Obiettivo della Funzione
	1.	Lâ€™organizzatore crea una Landing della scuola dal pannello admin.
	2.	Lâ€™utente visita la landing e compila un form con:
	â€¢	Nome
	â€¢	Cognome
	â€¢	Numero di telefono
	â€¢	Email istituzionale
	3.	Il sistema controlla se lâ€™email appartiene al dominio autorizzato.
	4.	Se valida:
	â€¢	invia una mail di verifica con un link.
	5.	Quando lâ€™utente clicca il link:
	â€¢	il sistema conferma la verifica
	â€¢	genera automaticamente un badge digitale contenente:
	â€¢	Nome e Cognome
	â€¢	Scuola
	â€¢	Numero di telefono (non sul badge, ma salvato nel sistema)
	â€¢	QR code univoco
	â€¢	Stato: â€œVerificatoâ€
	6.	Il sistema invia una seconda email con:
	â€¢	il badge digitale (immagine o PDF)
	â€¢	il link alla pagina pubblica verificata dal QR code

â¸»

ğŸ« Pannello Organizzatore â€“ â€œSchool Badge Managerâ€

Nel pannello dellâ€™organizzatore deve essere presente una nuova sezione.

ğŸ“Œ Lâ€™organizzatore puÃ²:
	1.	Creare una Landing della scuola
	â€¢	Nome scuola
	â€¢	Logo
	â€¢	Domini email autorizzati
	â€¢	Testo descrittivo
	â€¢	URL automatico (es: /badge/immacolata)
	2.	Configurare i campi obbligatori del form
	â€¢	Nome (obbligatorio)
	â€¢	Cognome (obbligatorio)
	â€¢	Telefono (obbligatorio)
	â€¢	Email istituzionale (obbligatorio)
	3.	Vedere le richieste ricevute
	â€¢	Nome
	â€¢	Cognome
	â€¢	Telefono
	â€¢	Email
	â€¢	Stato (pending â†’ verified â†’ badge_generated)
	â€¢	Data richiesta
	â€¢	Data verifica
	4.	Gestire i badge
	â€¢	Rigenerare un badge
	â€¢	Revocare un badge
	â€¢	Visualizzare badge giÃ  generati
	5.	Gestire i domini della scuola

â¸»

ğŸŒ Landing Page pubblica â€“ Form Utente

Struttura:
	â€¢	Logo scuola
	â€¢	Titolo: â€œRichiedi il tuo Badge Ufficialeâ€
	â€¢	Testo introduttivo
	â€¢	Modulo con questi campi:
	â€¢	Nome
	â€¢	Cognome
	â€¢	Numero di telefono
	â€¢	Email istituzionale
	â€¢	Pulsante: â€œRichiedi Verificaâ€

Comportamento:
	â€¢	Se il dominio dellâ€™email non Ã¨ autorizzato â†’ messaggio errore.
	â€¢	Se valido â†’ invio della mail di verifica.
	â€¢	Messaggio:
â€œEmail inviata! Controlla la tua casella istituzionale.â€

â¸»

ğŸ§© Generazione del Badge

Il badge digitale deve contenere:
	â€¢	Logo della scuola
	â€¢	Nome e cognome dellâ€™utente
	â€¢	â€œBadge Verificato â€“ [Nome Scuola]â€
	â€¢	QR Code univoco
	â€¢	Codice identificativo univoco
	â€¢	Data emissione

Note:
	â€¢	Il numero telefonico resta solo nel database (non sul badge).
	â€¢	Il QR code punta alla pagina pubblica di verifica.

â¸»

ğŸ”— Pagina pubblica del QR code

URL tipo:

/verify-badge/{unique_id}

Contiene:
	â€¢	Nome e cognome
	â€¢	Scuola
	â€¢	Stato: â€œVerificatoâ€
	â€¢	Data di emissione
	â€¢	Eventuale nota della scuola

â¸»

ğŸ›  Requisiti tecnici Backend

Endpoint richiesti

1ï¸âƒ£ Richiesta badge
POST /badge/request
Input:
	â€¢	first_name
	â€¢	last_name
	â€¢	phone
	â€¢	email
	â€¢	school_id

Controlli:
	â€¢	dominio email
	â€¢	email non giÃ  verificata
	â€¢	telefono valido

Output:
	â€¢	success/failure
	â€¢	messaggi errore

2ï¸âƒ£ Verifica email via token
GET /badge/verify?token=...
Azioni:
	â€¢	valida token
	â€¢	crea badge
	â€¢	genera QR code
	â€¢	salva badge
	â€¢	aggiorna stato in â€œbadge_generatedâ€

3ï¸âƒ£ Pagina pubblica badge
GET /verify-badge/{unique_id}

â¸»

ğŸ—„ Database (aggiornato)

school_badge_requests
	â€¢	id
	â€¢	school_id
	â€¢	first_name
	â€¢	last_name
	â€¢	phone
	â€¢	email
	â€¢	token
	â€¢	token_expires_at
	â€¢	status (pending / verified / badge_generated / revoked)
	â€¢	badge_url
	â€¢	created_at
	â€¢	updated_at

generated_badges
	â€¢	id
	â€¢	badge_request_id
	â€¢	unique_id
	â€¢	qr_code_url
	â€¢	badge_image_url
	â€¢	created_at

â¸»

ğŸ“§ Email

1ï¸âƒ£ Email di verifica

Oggetto:
Conferma la tua identitÃ  per ottenere il Badge della Scuola

Contenuto:
	â€¢	testo introduttivo
	â€¢	link con token

2ï¸âƒ£ Email con badge

Oggetto:
Ecco il tuo Badge digitale!

Contenuto:
	â€¢	immagine / PDF badge
	â€¢	link pagina pubblica

â¸»

ğŸš€ Output richiesto allo sviluppatore

Produrre:
	1.	Schema database completo
	2.	API + documentazione
	3.	Landing page completa
	4.	Pannello organizzatore School Badge Manager
	5.	Generazione badge + QR code
	6.	Email doppia (verifica + badge)
	7.	Sicurezze: token, scadenze, rate limit
	8.	Pagina pubblica QR

â¸»

Se vuoi, ti preparo anche:
âœ… un design grafico del badge
âœ… un mockup della landing
âœ… il testo delle email giÃ  formattato

Vuoi anche questi?