STEP 1: UPDATE EXISTING DATABASE RECORDS                                                                                                                 
                                                                                                                                                           
  Set all existing transmissions to Sostituzione='N' so replacement logic can detect them:                                                                 
                                                                                                                                                           
  UPDATE siaeTransmissions                                                                                                                                 
  SET sostituzione = 'N'                                                                                                                                   
  WHERE sostituzione IS NULL OR sostituzione = '';                                                                                                         
                                                                                                                                                           
  Run this SQL update first before testing.                                                                                                                
                                                                                                                                                           
  ---                                                                                                                                                      
  STEP 2: SEND INITIAL REPORT (Jan 22)                                                                                                                     
                                                                                                                                                           
  Send RMG/RPG for date 2026-01-22 (first time):                                                                                                           
                                                                                                                                                           
  Expected behavior:                                                                                                                                       
  - Should check database: No accepted report for 2026-01-22 exists                                                                                        
  - Should set: Sostituzione="N" (new report)                                                                                                              
  - Should set: ProgressivoGenerazione="001"                                                                                                               
  - XML filename: RPG_2026_01_22_001.xsi                                                                                                                   
  - XML attributes:                                                                                                                                        
  Data="20260122"                                                                                                                                          
  DataGenerazione="20260122"                                                                                                                               
  Sostituzione="N"                                                                                                                                         
                                                                                                                                                           
  Log this before sending:                                                                                                                                 
  - Print: "No existing accepted report found for 2026-01-22"                                                                                              
  - Print: "Sending as NEW report (Sostituzione=N)"                                                                                                        
                                                                                                                                                           
  ---                                                                                                                                                      
  STEP 3: SEND REPLACEMENT REPORT (Same Date)                                                                                                              
                                                                                                                                                           
  Send RMG/RPG for same date 2026-01-22 again (replacement):                                                                                               
                                                                                                                                                           
  Expected behavior:                                                                                                                                       
  - Should check database: Found accepted report for 2026-01-22                                                                                            
  - Should set: Sostituzione="S" (replacement) ← AUTOMATIC                                                                                                 
  - Should set: ProgressivoGenerazione="002" (increment)                                                                                                   
  - XML filename: RPG_2026_01_22_002.xsi                                                                                                                   
  - XML attributes:                                                                                                                                        
  Data="20260122"                                                                                                                                          
  DataGenerazione="20260122"                                                                                                                               
  Sostituzione="S"                                                                                                                                         
                                                                                                                                                           
  Log this before sending:                                                                                                                                 
  - Print: "Found existing accepted report for 2026-01-22 (progressivo: 001)"                                                                              
  - Print: "Sending as REPLACEMENT (Sostituzione=S, new progressivo: 002)"                                                                                 
                                                                                                                                                           
  ---                                                                                                                                                      
  STEP 4: ADD DATE VALIDATION                                                                                                                              
                                                                                                                                                           
  Before sending each report, validate all dates match:                                                                                                    
                                                                                                                                                           
  const filenameDate = filename.match(/_(20\d{6})_/)[1];                                                                                                   
  const xmlData = xmlContent.match(/Data="(\d+)"/)[1];                                                                                                     
  const xmlDataGen = xmlContent.match(/DataGenerazione="(\d+)"/)[1];                                                                                       
                                                                                                                                                           
  console.log('Validation:');                                                                                                                              
  console.log('- Filename date:', filenameDate);                                                                                                           
  console.log('- XML Data:     ', xmlData);                                                                                                                
  console.log('- XML DataGen:  ', xmlDataGen);                                                                                                             
                                                                                                                                                           
  if (filenameDate !== xmlData || xmlData !== xmlDataGen) {                                                                                                
    throw new Error('DATE MISMATCH! Cannot send to SIAE.');                                                                                                
  }                                                                                                                                                        
                                                                                                                                                           
  console.log('✅ All dates match');                                                                                                                       
                                                                                                                                                           
  ---                                                                                                                                                      
  STEP 5: REPORT BACK                                                                                                                                      
                                                                                                                                                           
  After both tests, show me:                                                                                                                               
                                                                                                                                                           
  1. Database query result:                                                                                                                                
  SELECT reportDate, progressivoInvio, sostituzione, responseCode, status                                                                                  
  FROM siaeTransmissions                                                                                                                                   
  WHERE reportDate = '2026-01-22'                                                                                                                          
  ORDER BY progressivoInvio;                                                                                                                               
  2. Console logs showing:                                                                                                                                 
    - First send: "Sostituzione=N" logic triggered                                                                                                         
    - Second send: "Sostituzione=S" logic triggered                                                                                                        
  3. SIAE response for second submission:                                                                                                                  
    - Should be 0000 (accepted), NOT 0604 (duplicate)                                                                                                      
                                                                                                                                                           
  ---                                                                                                                                                      
  WHAT TO FIX IF ERROR 0603 STILL OCCURS                                                                                                                   
                                                                                                                                                           
  If you still get 0603, show me:                                                                                                                          
  console.log('DEBUG 0603:');                                                                                                                              
  console.log('reportDate variable:', reportDate);                                                                                                         
  console.log('eventDate variable:', eventDate);                                                                                                           
  console.log('filename:', filename);                                                                                                                      
  console.log('XML first line:', xmlContent.split('\n')[1]);                                                                                               
                                                                                                                                                           
  ---                                                                                                                                                      
  Execute these steps in order and report the results.